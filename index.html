<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <title>Joystick Debugging</title>
</head>
<body>
  <a-scene>
    <!-- Cube -->
    <a-box 
      id="rotatingCube" 
      position="0 1.5 -3" 
      rotation="0 0 0" 
      color="blue">
    </a-box>

    <!-- Camera and Controller -->
    <a-entity camera>
      <a-entity id="rightController" oculus-touch-controls="hand: right"></a-entity>
    </a-entity>
  </a-scene>

  <script>
    const cube = document.querySelector("#rotatingCube");
    let rotation = { x: 0, y: 0, z: 0 }; // Cube rotation
    let joystickInput = { x: 0, y: 0 }; // Joystick data

    // Listen for joystick movement
    document.querySelector("#rightController").addEventListener("thumbstickmoved", (event) => {
      joystickInput.x = event.detail.x;
      joystickInput.y = event.detail.y;
      console.log(`Joystick moved: x=${joystickInput.x}, y=${joystickInput.y}`);
    });

    // Continuous rotation based on joystick input
    function rotateCube() {
      // Update rotation if joystick is moved
      if (Math.abs(joystickInput.x) > 0.1 || Math.abs(joystickInput.y) > 0.1) {
        rotation.x += joystickInput.y * 2; // Up-down movement
        rotation.y += joystickInput.x * 2; // Left-right movement
        cube.setAttribute("rotation", `${rotation.x} ${rotation.y} ${rotation.z}`);
      }
      requestAnimationFrame(rotateCube); // Keep the loop running
    }

    // Start rotation loop
    rotateCube();
  </script>
</body>
</html>
