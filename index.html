<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>A-Frame Cube Rotation</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script>
    AFRAME.registerComponent('joystick-rotation', {
      schema: { speed: { type: 'number', default: 1 } },
      init: function () {
        this.rotateX = 0;
        this.rotateY = 0;
      },
      tick: function () {
        const rightController = document.querySelector('#right-hand');
        if (rightController) {
          const axes = rightController.components['tracked-controls']?.gamepad?.axes || [];
          if (axes.length >= 2) {
            // Joystick values
            const x = axes[0]; // Left-right movement
            const y = axes[1]; // Up-down movement

            this.rotateY += x * this.data.speed; // Rotate around Y-axis
            this.rotateX -= y * this.data.speed; // Rotate around X-axis

            this.el.object3D.rotation.set(
              THREE.Math.degToRad(this.rotateX),
              THREE.Math.degToRad(this.rotateY),
              0
            );
          }
        }
      },
    });
  </script>
</head>
<body>
  <a-scene>
    <!-- Cube -->
    <a-box
      position="0 1.6 -3"
      depth="2"
      height="2"
      width="2"
      color="#4CAF50"
      joystick-rotation="speed: 2">
    </a-box>

    <!-- Right hand controller -->
    <a-entity id="right-hand" tracked-controls="hand: right"></a-entity>

    <!-- Camera with VR entry -->
    <a-camera position="0 1.6 0">
      <a-entity oculus-touch-controls="hand: right"></a-entity>
    </a-camera>
  </a-scene>
</body>
</html>
