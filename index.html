<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>A-Frame Cube Rotation</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script>
    AFRAME.registerComponent('joystick-rotation', {
      schema: { speed: { type: 'number', default: 2 } },
      init: function () {
        this.rotation = new THREE.Vector3(0, 0, 0); // Store rotation
      },
      tick: function () {
        const controller = this.el.sceneEl.querySelector('#right-hand');
        if (controller && controller.components['oculus-touch-controls']) {
          const gamepad = controller.components['oculus-touch-controls'].controller;
          if (gamepad && gamepad.axes) {
            const [x, y] = gamepad.axes; // Joystick input
            // Update rotation based on joystick input
            this.rotation.y += x * this.data.speed * 0.01; // Horizontal rotation
            this.rotation.x -= y * this.data.speed * 0.01; // Vertical rotation

            // Apply rotation to the object
            this.el.object3D.rotation.set(
              this.rotation.x,
              this.rotation.y,
              this.rotation.z
            );
          }
        }
      },
    });
  </script>
</head>
<body>
  <a-scene>
    <!-- Cube -->
    <a-box
      position="0 1.6 -3"
      depth="2"
      height="2"
      width="2"
      color="#4CAF50"
      joystick-rotation="speed: 5">
    </a-box>

    <!-- Right hand controller -->
    <a-entity id="right-hand" oculus-touch-controls="hand: right"></a-entity>

    <!-- Camera with VR entry -->
    <a-camera position="0 1.6 0">
      <a-entity oculus-touch-controls="hand: right"></a-entity>
    </a-camera>
  </a-scene>
</body>
</html>
